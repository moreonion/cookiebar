!function(t,e){"function"==typeof define&&define.amd?define(["./cookiebar"],e):"object"==typeof exports?module.exports=e(require("./cookiebar")):t.Cookiebar=e(t.Cookiebar)}(this,function(t){function t(t){var s={el:null,text:"Default text",setupCloseListener:!0,closeHandler:this._closeHandler,closeClass:"close",storage:"local",storageKey:"mo-cookiebar.displayed",allowHiding:!0};this.settings=Object.assign(s,t),this.el=null,this.closeListener=null,this.storage=null,"local"===this.settings.storage&&(this.storage=e.localStorage),"session"===this.settings.storage&&(this.storage=e.sessionStorage),this.settings.el&&(this.bindTo(this.settings.el),""===this.el.textContent&&this.text(this.settings.text)),this.el&&(this.displayed()&&this.settings.allowHiding?this.state("hidden"):this.state("visible"))}module="undefined"==typeof module?{}:module,module.exports=t;var e="undefined"==typeof window?{}:window;return t.prototype.bindTo=function(t,s){if("undefined"==typeof s&&(s=e.document),"string"==typeof t&&(this.el=s.querySelector(t)),t instanceof HTMLElement&&(this.el=t),this.el&&this.settings.setupCloseListener){var i=this;return this.closeListener=function(t){i.settings.closeHandler.call(i,t),i.el.removeEventListener("click",i.closeListener,!1)},this.el.addEventListener("click",this.closeListener,!1),!0}return!1},t.prototype.state=function(t){if("string"==typeof t){if(!(this.el instanceof HTMLElement))throw new Error("Cookiebar: Not bound to an element.");"visible"===t?this.el.style.display="block":"hidden"===t&&(this.el.style.display="none")}return this._getState()},t.prototype._getState=function(){return this.el?this.el.style.display:null},t.prototype.text=function(t){if("string"==typeof t){if(!(this.el instanceof HTMLElement))throw new Error("Cookiebar: Not bound to an element.");this.el.innerHTML=t}return this._getText()},t.prototype._getText=function(){return this.el?this.el.textContent:""},t.prototype._closeHandler=function(t){t.preventDefault();var e=t.target.className||"",s=e.split(/\s+/);s.indexOf(this.settings.closeClass)>=0&&(this.state("hidden"),this.displayed("1"))},t.prototype.displayed=function(t){return"undefined"==typeof t?this._getDisplayed():(1==t?this.storage.setItem(this.settings.storageKey,"1"):this.storage.setItem(this.settings.storageKey,"0"),this._getDisplayed())},t.prototype._getDisplayed=function(){return this.storage&&this.storage.getItem&&1==this.storage.getItem(this.settings.storageKey)?!0:!1},module.exports});